<%= content_for :stylesheet do %>
  <%= stylesheet_link_tag 'datatables.min' %>
<% end %>

<%= content_for :javascript do %>
  <%= javascript_include_tag 'pdfmake.min' %>
  <%= javascript_include_tag 'vfs_fonts.js' %>
  <%= javascript_include_tag 'datatables.min.js' %>
  <%= javascript_include_tag 'tickets' %>
<% end %>

<% if @tickets.count >= 1 %>
  <%= form_tag({ controller: 'bills', action: 'select_info' }, method: 'post') do %>
    <table id="tickets">
      <thead>
        <tr class="table-titles">
          <th></th>
          <th class="col-md-1">Caja</th>
          <th class="col-md-1">No.</th>
          <th>Fecha</th>
          <th>Cliente</th>
          <th>Atendi√≥</th>
          <th>Subtotal</th>
          <th>Dev / Cambios</th>
          <th>Total</th>
          <th>Saldo / Estauts</th>
        </tr>
      </thead>
      <tbody>
          <% @tickets.each do |ticket| %>
            <tr>
              <td> <%= check_box_tag "tickets[]", "#{ticket.id}", false, { multiple: true, id: "tickets[#{ticket.id}]", }%> </td>
              <td> <%= ticket.cash_register.name %> </td>
              <td> <%= ticket.ticket_number %> </td>
              <td> <%= l ticket.created_at.to_date %> </td>
              <td> <%= show_non_blank_field(ticket.prospect&.legal_or_business_name) %> </td>
              <td> <%= ticket_user(ticket) %> </td>
              <td> <%= number_to_currency(ticket.total) %> </td>
              <td> <%= number_to_currency(get_returns_or_changes(ticket)) %> </td>
              <td> <%= number_to_currency(get_total_with_returns_or_changes(ticket)) %> </td>
              <td> <%= get_payments_from_individual_ticket(ticket) %> </td>
            </tr>
          <% end %>
      </tbody>
    </table>

    <div class="actions">
      <%= submit_tag 'Seleccionar datos', class: 'main-button' %>
    </div><br /><br />

  <% end %>

<% else %>
  <p class="individual-font">No hay tickets pendientes por facturar </p>
<% end %>
